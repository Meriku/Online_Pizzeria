@page
@model Online_Pizzeria.Pages.Checkout.CheckoutModel

@{
    var imagePath = "/images/AllPizzas/" + @Model.UserOrder.UserPizza.ImageName + ".png";
}

<div class="boxCheckout">
    <h5 class="center">Please, check your Order</h5>
    <br />
    <p class="center m-0">Pizza Name: @Model.UserOrder.UserPizza.Name</p>
    <p class="center m-0">Pizza Price: @Model.UserOrder.Price</p>
    <p class="center m-0">Pizza Ingredients: @Model.UserOrder.UserPizza.Ingredients</p>
    <div class="center">
        <a id="approveButton" class="btn buttonCheckoutDone">Checkout</a>
    <a id="cancelButton" class="btn buttonCheckoutCancel">Cancel</a>
</div>

</div>

<div class="center">
    <img src="@imagePath" class="finalImage m-2" title="@Model.UserOrder.UserPizza.Name">
</div>


<script>
    window.onload = () => {
        document.getElementById("approveButton").addEventListener("click", sendNewOrder)
        document.getElementById("cancelButton").addEventListener("click", sendUserBack)
    }

    function sendNewOrder() {
        $.ajax({
            type: 'POST',
            url: "Checkout/Checkout",
            headers: {
                RequestName: "SendNewOrderRequest",
                RequestVerificationToken: $('input:hidden[name="__RequestVerificationToken"]').val()
            },
            success: function() {
                $(window).attr('location', `Checkout\ThankYou`)
            }
        })
    }


    function sendUserBack() {
        $(window).attr('location', `/Pizza`)
    }
</script>

